-- Initialize TokyoLib
local library = loadstring(game:HttpGet("https://raw.githubusercontent.com/drillygzzly/Roblox-UI-Libs/main/1%20Tokyo%20Lib%20(FIXED)/Tokyo%20Lib%20Source.lua"))({
    cheatname = "AutoSystem",
    gamename = "YourGame"
})

-- Initialize the library
library:init()
print("TokyoLib initialized")

-- Create a window
local Window1 = library.NewWindow({
    title = "AutoSystem | YourGame",
    size = UDim2.new(0, 510, 0.6, 6),
    position = UDim2.new(0.5, -255, 0.5, -180)  -- center the window on screen
})
print("Window created")

-- Toggle the window to make sure it's visible
Window1:toggle()
print("UI visible")

-- Add a tab
local Tab1 = Window1:AddTab("Auto System")

-- Add toggles for Auto Dodge, Auto QTE, and Auto Thorian
local AutoDodgeToggle = Tab1:AddToggle({
    text = "Auto Dodge",
    state = false,
    callback = function(value)
        _G.AutoDodge = value
        if value then
            autoDodgeTask = task.spawn(startAutoDodge)
        else
            autoDodgeTask = nil
        end
    end
})

local AutoQTEToggle = Tab1:AddToggle({
    text = "Auto QTE",
    state = false,
    callback = function(value)
        _G.AutoQTE = value
        if value then
            autoQteTask = task.spawn(startAutoQTE)
        else
            autoQteTask = nil
        end
    end
})

local AutoThorianToggle = Tab1:AddToggle({
    text = "Auto Thorian QTE",
    state = false,
    callback = function(value)
        _G.AutoThorian = value
        if value then
            autoThorianTask = task.spawn(startAutoThorianQTE)
        else
            autoThorianTask = nil
        end
    end
})

-- Add a dropdown for weapon selection
local WeaponDropdown = Tab1:AddList({
    text = "Select Weapon",
    values = {"Sword", "Spear", "Magic", "Dagger", "Fist"},
    callback = function(selectedWeapon)
        _G.SelectedWeapon = selectedWeapon
        print("Selected Weapon:", selectedWeapon)
    end
})

-- Add a button to toggle the GUI visibility
Tab1:AddButton({
    text = "Toggle GUI",
    callback = function()
        Window1:toggle()
    end
})

-- Function to start auto dodge
local function startAutoDodge()
    while _G.AutoDodge do
        pcall(function()
            local remotes = ReplicatedStorage:FindFirstChild("Remotes")
            if remotes then
                local info = remotes:FindFirstChild("Information")
                local rf = info and info:FindFirstChild("RemoteFunction")
                if rf then
                    rf:FireServer({true, true}, "DodgeMinigame")
                end
            end
        end)
        wait(0.2)
    end
end

-- Function to start auto QTE
local function startAutoQTE()
    while _G.AutoQTE do
        pcall(function()
            local remotes = ReplicatedStorage:FindFirstChild("Remotes")
            if remotes then
                local info = remotes:FindFirstChild("Information")
                local rf = info and info:FindFirstChild("RemoteFunction")
                if rf then
                    local qteName = _G.SelectedWeapon .. "QTE"
                    rf:FireServer(true, qteName)
                end
            end
        end)
        wait(0.4)
    end
end

-- Function to start auto Thorian QTE
local function startAutoThorianQTE()
    while _G.AutoThorian do
        pcall(function()
            local remotes = ReplicatedStorage:FindFirstChild("Remotes")
            if remotes then
                local info = remotes:FindFirstChild("Information")
                local rf = info and info:FindFirstChild("RemoteFunction")
                if rf then
                    rf:FireServer(true, "ThorianQTE")
                end
            end
        end)
        wait(0.4)
    end
end
