-- Combined Tabbed GUI Script
-- Services
local Players = game:GetService("Players")
local Workspace = game:GetService("Workspace")
local ReplicatedStorage = game:GetService("ReplicatedStorage")
local RunService = game:GetService("RunService")
local UIS = game:GetService("UserInputService")

local player = Players.LocalPlayer
local character = player.Character or player.CharacterAdded:Wait()
local humanoidRootPart = character:WaitForChild("HumanoidRootPart")
local playerGui = player:WaitForChild("PlayerGui")

-- Main ScreenGui
local gui = Instance.new("ScreenGui")
gui.Name = "TabbedAutoTeleportUI"
gui.ResetOnSpawn = false
gui.Parent = playerGui

-- Main container frame
local mainFrame = Instance.new("Frame")
mainFrame.Size = UDim2.new(0, 350, 0, 400)
mainFrame.Position = UDim2.new(0.6, -175, 0.5, -200)
mainFrame.BackgroundColor3 = Color3.fromRGB(40, 40, 40)
mainFrame.BorderSizePixel = 0
mainFrame.Active = true
mainFrame.Parent = gui
Instance.new("UICorner", mainFrame).CornerRadius = UDim.new(0, 8)

-- Tab bar
local tabBar = Instance.new("Frame")
tabBar.Size = UDim2.new(1, 0, 0, 30)
tabBar.BackgroundTransparency = 1
tabBar.Parent = mainFrame

local function createTabButton(name, xScale)
    local btn = Instance.new("TextButton")
    btn.Size = UDim2.new(0.5, 0, 1, 0)
    btn.Position = UDim2.new(xScale, 0, 0, 0)
    btn.BackgroundColor3 = Color3.fromRGB(70, 70, 70)
    btn.BorderSizePixel = 0
    btn.Font = Enum.Font.SourceSansBold
    btn.TextSize = 16
    btn.TextColor3 = Color3.new(1, 1, 1)
    btn.Text = name
    btn.Parent = tabBar
    return btn
end

local autoTabBtn = createTabButton("ÏûêÎèô ÏãúÏä§ÌÖú", 0)
local tpTabBtn = createTabButton("NPC Ïù¥Îèô", 0.5)

-- Content frames
local autoFrame = Instance.new("Frame")
autoFrame.Name = "AutoTab"
autoFrame.Size = UDim2.new(1, 0, 1, -30)
autoFrame.Position = UDim2.new(0, 0, 0, 30)
autoFrame.BackgroundTransparency = 1
autoFrame.Parent = mainFrame

local tpFrame = Instance.new("Frame")
tpFrame.Name = "TeleportTab"
tpFrame.Size = UDim2.new(1, 0, 1, -30)
tpFrame.Position = UDim2.new(0, 0, 0, 30)
tpFrame.BackgroundTransparency = 1
tpFrame.Visible = false
tpFrame.Parent = mainFrame

local function switchTabs(toAuto)
    autoFrame.Visible = toAuto
    tpFrame.Visible = not toAuto
    autoTabBtn.BackgroundColor3 = toAuto and Color3.fromRGB(100,100,100) or Color3.fromRGB(70,70,70)
    tpTabBtn.BackgroundColor3   = toAuto and Color3.fromRGB(70,70,70)  or Color3.fromRGB(100,100,100)
end

autoTabBtn.MouseButton1Click:Connect(function() switchTabs(true) end)
tpTabBtn.MouseButton1Click:Connect(function() switchTabs(false) end)

-- ====================
-- ÏûêÎèô ÏãúÏä§ÌÖú ÌÉ≠
-- ====================
local autoContainer = Instance.new("Frame")
autoContainer.Size = UDim2.new(0,230,0,320)
autoContainer.Position = UDim2.new(0.5, -115, 0.5, -160)
autoContainer.BackgroundColor3 = Color3.fromRGB(40,40,40)
autoContainer.BorderSizePixel = 0
autoContainer.Parent = autoFrame
Instance.new("UICorner", autoContainer).CornerRadius = UDim.new(0,6)

local dodgeBtn = Instance.new("TextButton")
dodgeBtn.Size = UDim2.new(1,-20,0,40)
dodgeBtn.Position = UDim2.new(0,10,0,10)
dodgeBtn.Text = "ÏûêÎèôÌöåÌîº: OFF"
dodgeBtn.Font = Enum.Font.SourceSansBold
dodgeBtn.TextSize = 18
dodgeBtn.TextColor3 = Color3.new(1,1,1)
dodgeBtn.BackgroundColor3 = Color3.fromRGB(70,130,180)
dodgeBtn.Parent = autoContainer

local qteBtn = dodgeBtn:Clone()
qteBtn.Parent = autoContainer
qteBtn.Position = UDim2.new(0,10,0,60)
qteBtn.Text = "Î¨¥Í∏∞ QTE: OFF"
qteBtn.BackgroundColor3 = Color3.fromRGB(180,100,70)

local thorianBtn = dodgeBtn:Clone()
thorianBtn.Parent = autoContainer
thorianBtn.Position = UDim2.new(0,10,0,110)
thorianBtn.Text = "ÌÜ†Î¶¨Ïïà QTE: OFF"
thorianBtn.BackgroundColor3 = Color3.fromRGB(140,70,180)

local autoDodge, autoQTE, autoThorian = false, false, false
local selectedWeapon = "Sword"
local weapons = {"Sword","Spear","Magic","Dagger","Fist"}
for i,w in ipairs(weapons) do
    local btn = Instance.new("TextButton")
    btn.Size = UDim2.new(0,100,0,25)
    btn.Position = UDim2.new(0,10 + ((i-1)%2)*110,0,170 + math.floor((i-1)/2)*30)
    btn.Text = w
    btn.Font = Enum.Font.SourceSans
    btn.TextSize = 14
    btn.TextColor3 = Color3.new(1,1,1)
    btn.BackgroundColor3 = Color3.fromRGB(100,100,100)
    btn.Parent = autoContainer
    btn.MouseButton1Click:Connect(function() selectedWeapon = w end)
end

local function startAutoDodge()
    while autoDodge do
        pcall(function()
            local remotes = ReplicatedStorage:FindFirstChild("Remotes")
            local rf = remotes and remotes.Information and remotes.Information:FindFirstChild("RemoteFunction")
            if rf then rf:FireServer({true,true}, "DodgeMinigame") end
        end)
        task.wait(0.2)
    end
end

local function startAutoQTE()
    while autoQTE do
        pcall(function()
            local remotes = ReplicatedStorage:FindFirstChild("Remotes")
            local rf = remotes and remotes.Information and remotes.Information:FindFirstChild("RemoteFunction")
            if rf then rf:FireServer(true, selectedWeapon.."QTE") end
        end)
        task.wait(0.4)
    end
end

local function startAutoThorian()
    while autoThorian do
        pcall(function()
            local remotes = ReplicatedStorage:FindFirstChild("Remotes")
            local rf = remotes and remotes.Information and remotes.Information:FindFirstChild("RemoteFunction")
            if rf then rf:FireServer(true, "ThorianQTE") end
        end)
        task.wait(0.4)
    end
end

dodgeBtn.MouseButton1Click:Connect(function()
    autoDodge = not autoDodge
    dodgeBtn.Text = "ÏûêÎèôÌöåÌîº: "..(autoDodge and "ON" or "OFF")
    if autoDodge then task.spawn(startAutoDodge) end
end)

qteBtn.MouseButton1Click:Connect(function()
    autoQTE = not autoQTE
    qteBtn.Text = "Î¨¥Í∏∞ QTE: "..(autoQTE and "ON" or "OFF")
    if autoQTE then task.spawn(startAutoQTE) end
end)

thorianBtn.MouseButton1Click:Connect(function()
    autoThorian = not autoThorian
    thorianBtn.Text = "ÌÜ†Î¶¨Ïïà QTE: "..(autoThorian and "ON" or "OFF")
    if autoThorian then task.spawn(startAutoThorian) end
end)

-- ====================
-- NPC Ïù¥Îèô ÌÉ≠
-- ====================
local reloadBtn2 = Instance.new("TextButton")
reloadBtn2.Size = UDim2.new(1,-20,0,30)
reloadBtn2.Position = UDim2.new(0,10,0,10)
reloadBtn2.Text = "üîÑ NPC Îã§Ïãú Î∂àÎü¨Ïò§Í∏∞"
reloadBtn2.Font = Enum.Font.SourceSansBold
reloadBtn2.TextSize = 14
reloadBtn2.TextColor3 = Color3.new(1,1,1)
reloadBtn2.BackgroundColor3 = Color3.fromRGB(80,80,80)
reloadBtn2.Parent = tpFrame
Instance.new("UICorner", reloadBtn2).CornerRadius = UDim.new(0,6)

local scroll = Instance.new("ScrollingFrame")
scroll.Size = UDim2.new(1,-20,1,-140)
scroll.Position = UDim2.new(0,10,0,50)
scroll.CanvasSize = UDim2.new(0,0,0,0)
scroll.AutomaticCanvasSize = Enum.AutomaticSize.Y
scroll.ScrollBarThickness = 8
scroll.BackgroundColor3 = Color3.fromRGB(40,40,40)
scroll.Parent = tpFrame
local listLayout = Instance.new("UIListLayout", scroll)
listLayout.Padding = UDim.new(0,5)

local npcButtons = {}
local selectedNPC2 = nil

local function loadNPCs()
    for _,btn in ipairs(npcButtons) do btn:Destroy() end
    npcButtons = {}
    selectedNPC2 = nil
    for _, obj in ipairs(Workspace:GetDescendants()) do
        if obj:IsA("Model") and obj:FindFirstChild("Humanoid") and obj:FindFirstChild("HumanoidRootPart") then
            local btn = Instance.new("TextButton")
            btn.Size = UDim2.new(1,0,0,25)
            btn.Text = obj.Name
            btn.Font = Enum.Font.SourceSans
            btn.TextSize = 14
            btn.TextColor3 = Color3.new(1,1,1)
            btn.BackgroundColor3 = Color3.fromRGB(90,90,90)
            btn.Parent = scroll
            table.insert(npcButtons, btn)
            btn.MouseButton1Click:Connect(function()
                selectedNPC2 = obj
                for _, other in ipairs(npcButtons) do
                    other.BackgroundColor3 = Color3.fromRGB(90,90,90)
                end
                btn.BackgroundColor3 = Color3.fromRGB(0,170,255)
            end)
        end
    end
end
reloadBtn2.MouseButton1Click:Connect(loadNPCs)
loadNPCs()

local tpBtn2 = Instance.new("TextButton")
tpBtn2.Size = UDim2.new(1,-20,0,30)
tpBtn2.Position = UDim2.new(0,10,1,-40)
tpBtn2.Text = "üöÄ ÏÑ†ÌÉùÌïú NPCÎ°ú Ïù¥Îèô"
tpBtn2.Font = Enum.Font.SourceSansBold
tpBtn2.TextSize = 16
tpBtn2.TextColor3 = Color3.new(1,1,1)
tpBtn2.BackgroundColor3 = Color3.fromRGB(0,128,255)
tpBtn2.Parent = tpFrame
Instance.new("UICorner", tpBtn2).CornerRadius = UDim.new(0,6)

tpBtn2.MouseButton1Click:Connect(function()
    if ...
