-- LocalScript 위치: StarterGui 또는 StarterPlayerScripts
local Players = game:GetService("Players")
local player = Players.LocalPlayer

-- UI 생성
local screenGui = Instance.new("ScreenGui")
screenGui.Name = "RollbackUI"
screenGui.ResetOnSpawn = false
screenGui.Parent = player:WaitForChild("PlayerGui")

-- Rollback 버튼
local rollbackButton = Instance.new("TextButton")
rollbackButton.Name = "RollbackButton"
rollbackButton.Size = UDim2.new(0.2, 0, 0.08, 0)
rollbackButton.Position = UDim2.new(0.4, 0, 0.3, 0)
rollbackButton.Text = "Rollback"
rollbackButton.BackgroundColor3 = Color3.fromRGB(255, 100, 100)
rollbackButton.TextColor3 = Color3.new(1, 1, 1)
rollbackButton.Font = Enum.Font.GothamBold
rollbackButton.TextSize = 20
rollbackButton.Parent = screenGui

-- Rejoin 버튼
local rejoinButton = Instance.new("TextButton")
rejoinButton.Name = "RejoinButton"
rejoinButton.Size = UDim2.new(0.2, 0, 0.08, 0)
rejoinButton.Position = UDim2.new(0.4, 0, 0.4, 0)
rejoinButton.Text = "Rejoin"
rejoinButton.BackgroundColor3 = Color3.fromRGB(100, 150, 255)
rejoinButton.TextColor3 = Color3.new(1, 1, 1)
rejoinButton.Font = Enum.Font.GothamBold
rejoinButton.TextSize = 20
rejoinButton.Parent = screenGui

-- 저장할 인벤토리 상태
local savedInventory = {}

-- Rollback 버튼 기능
rollbackButton.MouseButton1Click:Connect(function()
	savedInventory = {}

	for _, tool in pairs(player.Backpack:GetChildren()) do
		if tool:IsA("Tool") then
			table.insert(savedInventory, tool.Name)
		end
	end

	print("✅ 인벤토리 저장됨:", table.concat(savedInventory, ", "))
end)

-- Rejoin 버튼 기능 (저장된 상태로 복원)
rejoinButton.MouseButton1Click:Connect(function()
	if #savedInventory == 0 then
		warn("❌ 저장된 인벤토리 없음")
		return
	end

	-- 기존 아이템 제거
	for _, tool in pairs(player.Backpack:GetChildren()) do
		if tool:IsA("Tool") then
			tool:Destroy()
		end
	end

	-- 저장된 아이템 복원
	for _, itemName in ipairs(savedInventory) do
		local tool = Instance.new("Tool")
		tool.Name = itemName
		tool.Parent = player.Backpack
	end

	print("♻️ 복원 완료:", table.concat(savedInventory, ", "))
end)
